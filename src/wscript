#! /usr/bin/env python

import os, sys

def set_options(opt):
    pass

def build(bld):
    obj = bld.new_task_gen(features = 'cxx cstaticlib',
                           includes = ['. opengl'],
                           proto_gen_py = True,
                           target = 'graphics',
                           install_path='${PREFIX}/lib')

    obj.find_sources_in_dirs('. opengl ../proto')

    obj = bld.new_task_gen(features = 'cxx cstaticlib',
                           includes = ['. null'],
                           proto_gen_py = True,
                           target = 'graphics_null',
                           install_path='${PREFIX}/lib')

    obj.find_sources_in_dirs('. null ../proto')

    bld.add_subdirs('glfw')

    bld.install_files('${PREFIX}/include/graphics/', 'graphics_device.h')
    bld.install_files('${PREFIX}/include/graphics/opengl', 'opengl/opengl_device_defines.h')
    bld.install_files('${PREFIX}/include/graphics/', 'vertexprogram_defines.h')
    bld.install_files('${PREFIX}/include/graphics/', 'material.h')

    bld.install_files('${PREFIX}/include/graphics/null', 'null/null_device_defines.h')

    bld.install_files('${PREFIX}/include/graphics/glfw', 'glfw/include/GL/glfw.h')

    bld.install_files('${PREFIX}/bin', 'ddsc.py')
    bld.install_files('${PREFIX}/lib/python', 'dds.py')
    bld.install_files('${PREFIX}/lib/python', 'waf_graphics.py')

def configure(conf):
    pass
