function init(self)
    self.collection_sp_ids = { "#test_attacker_target_proxy" }
    msg.post(self.collection_sp_ids[1], "load")
    msg.post(self.collection_sp_ids[1], "init")
    self.timer = 4
end

function update(self, dt)
    self.timer = self.timer - dt
    if self.timer < 0 then
        print("Target never killed, exiting.")
        msg.post("@system:", "exit", { code = 1 })
    end
end

function on_message(self, message_id, message)
    if message_id == hash("target_dead") then
        msg.post("@system:", "exit", { code = 0 })
    elseif message_id == hash("start") then
        msg.post(self.collection_sp_ids[1], "enable")
    end
end
